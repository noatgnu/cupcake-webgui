<div class="modal-header">
  <h5 class="modal-title">
    <i class="bi bi-pencil me-2"></i>
    Edit Session
  </h5>
  <button type="button" class="btn-close" (click)="cancel()" [disabled]="saving"></button>
</div>

<div class="modal-body">
  <form [formGroup]="sessionForm">
    <div class="mb-3">
      <label for="sessionName" class="form-label">
        Session Name <span class="text-danger">*</span>
      </label>
      <input
        type="text"
        class="form-control"
        id="sessionName"
        formControlName="name"
        placeholder="e.g., Experiment 2025-01-15"
        [class.is-invalid]="sessionForm.get('name')?.invalid && sessionForm.get('name')?.touched">
      @if (sessionForm.get('name')?.invalid && sessionForm.get('name')?.touched) {
        <div class="invalid-feedback">
          Session name is required
        </div>
      }
    </div>

    <div class="mb-3">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          id="enabled"
          formControlName="enabled">
        <label class="form-check-label" for="enabled">
          Public
        </label>
      </div>
      <div class="form-text">
        Make this session viewable to everyone
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="startedAt" class="form-label">
          Planned Start Date
        </label>
        <input
          type="date"
          class="form-control"
          id="startedAt"
          formControlName="startedAt">
        <div class="form-text">
          Planned start date for this session
        </div>
      </div>

      <div class="col-md-6 mb-3">
        <label for="endedAt" class="form-label">
          Planned End Date
        </label>
        <input
          type="date"
          class="form-control"
          id="endedAt"
          formControlName="endedAt">
        <div class="form-text">
          Planned end date for this session
        </div>
      </div>
    </div>
  </form>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="saving">
    Cancel
  </button>
  <button
    type="button"
    class="btn btn-primary"
    (click)="updateSession()"
    [disabled]="!sessionForm.valid || saving">
    @if (saving) {
      <span class="spinner-border spinner-border-sm me-1"></span>
    }
    <i class="bi bi-save me-1"></i>
    Save Changes
  </button>
</div>
